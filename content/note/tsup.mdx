---
author: ariandel
date: 2025-02-12
description: "esbuild를 사용하면 빠르다는데"
tags: ["node"]
title: tsup 번들러
---

### 기존 번들러

내가알던 웹개발시 사용하는 대표 번들러로 webpack이랑 vite가 있었는데
라이브러리 개발시에는 tsup이 더 좋다고 한다.

webpack은 javascript로 작성되었고
vite또한 hmr는 esbuild기반이지만 번들링 자체는 rollup을 그대로 사용하기때문에
javascript로 돌아간다. (이와 같은 이유로 build와 dev간의 환경이 달라서 안정성 측면에서 문제가 있다고 하기도하는데 일단 개발시에 빠르니까..)

tsup은 번들링 자체가 esbuild를 사용하기때문에 빠르다고 한다.


### esbuild가 빠른이유

일단 go언어로 작성되었기 때문에 컴파일후 바이너리로 돌아간다. javascript는 v8엔진아래서 JIT컴파일 방식으로 돌아가서 속도가 느리다.

언어 이슈기도한데 node가 싱글쓰레드 기반이라서 병렬처리가 안되는데 go는 멀티쓰레드 기반이라서 병렬처리가 가능하다.

### 로더

소스코드 이외에 리소스파일을 로드하는 방식을 지정할 수 있다.
예를들어 .jpg파일을 코드에서 import할때 loader 를 base64로 지정하느냐 또는 file로 지정하느냐에 따라서
번들링 과정에서 처리방식이 달라진다.

### 소스맵

전에 minifiy, treeshaking 같은건 들어봣는데 소스맵은 처음듣는다.
빌드된 프로그램이 오류났을때 해당 함수가 원본소스 어디에 있는지 알려주기위한 파일같다. (디버깅용)


### 여담

워커쓰레드 쓰면 싱글쓰레드가 아니라고 생각할 수도 있는데
각 워커끼리 메모리를 공유하는 방식은 아니다. (코드만 공유하고 데이터(전역변수)도 공유하지는 않는다.)

각 워커쓰레드는 독립적인 v8엔진 아래서 돌아가고 메세지 기반 통신을 한다. 거의 분리된 프로세스라고 보는게 가까울듯